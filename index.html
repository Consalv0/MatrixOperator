<!DOCTYPE html><link hreflang="es-MX" href="//Consalv0.github.io/MatrixOperator"><html><head><title>Matrix Operator</title><meta charset="UTF-8"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"><!-- script(language='javascript' type='text/javascript' src='//cdnjs.cloudflare.com/ajax/libs/svg.js/2.5.2/svg.min.js')--><style>@import url(//fonts.googleapis.com/css?family=Lato:300,400,700,400italic|Playfair+Display);html,body{font-family:'Lato',sans-serif;background-color:#000}@media (max-width:992px){html,body{font-size:3em}html .modal,body .modal,html select,body select{font-size:1rem}html h3,body h3{font-size:1.5rem}}h2.card-block{text-align:center;font-weight:bold}.card,.side{margin-top:4%}#tables{margin-top:8%;margin-bottom:8%}@media (max-width:992px){#tables{margin-top:0;margin-bottom:4%}}.div{margin-left:5%;margin-right:5%;margin-top:0;margin-bottom:0}#sizeController{padding-top:0}</style></head><body><div id="noSameSize" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" class="modal fade"><div class="modal-dialog"><div class="alert alert-warning"><strong>WARNING!</strong><p>The matrices must have an&nbsp<strong>equal number of rows and columns</strong>&nbspto be operated.</p></div></div></div><div id="noEqualIntersections" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" class="modal fade"><div class="modal-dialog"><div class="alert alert-warning"><strong>WARNING!</strong><p>The &nbsp<strong>number of columns in A must be equal to the number of rows in B</strong>&nbspto be operated.</p></div></div></div><div id="tables" class="d-flex flex-column flex-lg-row justify-content-around"><div class="col-xs-12 col-lg-5"><div id="mTableA" class="card"><div class="card-block"><h2 class="card-title font-weight-bold text-center">Matrix A</h2><h6 class="card-subtitle text-center text-muted">2 x 3</h6></div><div id="sizeController" class="card-block btn-toolbar justify-content-between"><div class="d-flex flex-column flex-lg-row"><h3 class="text-center mr-lg-2">Rows</h3><div id="rows" class="btn-group"><button id="sum" class="btn btn-primary">+</button><button id="sub" class="btn btn-secondary">-</button></div></div><div class="d-flex flex-column flex-lg-row"><h3 class="text-center mr-lg-2">Columns</h3><div id="columns" class="btn-group"><button id="sum" class="btn btn-primary">+</button><button id="sub" class="btn btn-secondary">-</button></div></div></div><div class="div"><div style="width: 100%; height: 1px; background-color: #ccc;" class="progress-bar"></div></div><div id="table" class="card-block"></div></div></div><div class="col-xs-12-12 col-lg-5"><div id="mTableB" class="card"><div class="card-block"><h2 class="card-title font-weight-bold text-center">Matrix B</h2><h6 class="card-subtitle text-center text-muted">2 x 3</h6></div><div id="sizeController" class="card-block btn-toolbar justify-content-between"><div class="d-flex flex-column flex-lg-row"><h3 class="text-center mr-lg-2">Rows</h3><div id="rows" class="btn-group"><button id="sum" class="btn btn-primary">+</button><button id="sub" class="btn btn-secondary">-</button></div></div><div class="d-flex flex-column flex-lg-row"><h3 class="text-center mr-lg-2">Columns</h3><div id="columns" class="btn-group"><button id="sum" class="btn btn-primary">+</button><button id="sub" class="btn btn-secondary">-</button></div></div></div><div class="div"><div style="width: 100%; height: 1px; background-color: #ccc;" class="progress-bar"></div></div><div id="table" class="card-block"></div></div></div></div><div class="d-flex flex-row justify-content-around"><div class="card card-text-center"><div class="card-header"><div style="width: 100%; height: 1px; background-color: #ccc;" class="progress-bar"></div></div><div id="matrixOperator" class="card-block"><div id="twoMatrix" class="d-flex flex-column flex-lg-row btn-toolbar justify-content-center"><select id="matrixFirst" class="custom-select mr-3 mb-2 mb-lg-0"><option selected>Matrix A</option><option>Matrix B</option></select><div id="operation" data-toggle="buttons" class="btn-group justify-content-center mr-lg-3"><label id="sum" class="btn btn-primary active">+<input type="radio" name="options"></label><label id="sub" class="btn btn-primary">-<input type="radio" name="options"></label><label id="mult" class="btn btn-primary">•<input type="radio" name="options"></label></div><select id="matrixSecond" class="custom-select mr-3"><option>Matrix A</option><option selected>Matrix B</option></select></div><div class="div mb-2 mt-3"><div style="width: 100%; height: 1px; background-color: #ccc;" class="progress-bar"></div></div><div id="mTableC" class="d-flex flex-column"><h2 class="card-title font-weight-bold text-center">Matrix C</h2><h6 class="card-subtitle text-center text-muted">2 x 3</h6><div id="table" class="card-block"></div></div></div><div class="card-header"><div style="width: 100%; height: 1px; background-color: #ccc;" class="progress-bar"></div></div></div></div><script src="//code.jquery.com/jquery-3.2.1.min.js"></script><script src="//cdn.jsdelivr.net/lodash/4.17.4/lodash.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script><script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"></script><script>/* eslint space-infix-ops: 0, space-before-function-paren: 0, indent: 0, no-trailing-spaces: 0, no-irregular-whitespace: 0 */
/* global $ */

/* TABLE */
function addRow(path, id) {
  let row = '<div class="d-flex flex-nowrap" id="' + id + '">'
  $(path).append(row)
}

function addColumn(path, id, value = '') {
  let column = '<input type="number" class="form-control matrixListener" id="' + id + '" value="' + value + '" placeholder="0" style="text-align:center;">'
  $(path).append(column)
}
/* ******* */

/* MAKE */
function doMatrix(matrix, rows, columns) {
  for (let i = 0; i < rows; i++) {
    matrix.push([])
    for (let j = 0; j < columns; j++) {
      matrix[i].push('')
    }
  }
}

function makeTable(matrix, name) {
  matrix.forEach(function (matrix, i) {
    addRow('#mTable' + name + ' #table', i)
    matrix.forEach(function (matrix, j) {
      addColumn('#mTable' + name + ' #table' + ' div#' + i, j, matrix)
    })
  })
  sizeText(matrix, '#mTable' + name)
}

function emptyTable(name) {
  $('#mTable' + name + ' #table').empty()
}

var matrixA = []
var matrixB = []
doMatrix(matrixA, 3, 3)
doMatrix(matrixB, 3, 3)
makeTable(matrixA, 'A')
makeTable(matrixB, 'B')
/* ******* */

function getMatrixWithID(parentID) {
  parentID = parentID.toString()
  parentID = parentID.replace(/mTable/g, '')
  if (parentID === 'A') return matrixA
  if (parentID === 'B') return matrixB
}

function sizeText(matrix, path) {
  let matrixRows = matrix.length
  let matrixColumns = matrix[0].length
  $(path + ' .card-subtitle').text(matrixRows + ' × ' + matrixColumns)
}

function toggleModal(path) {
  $(path).modal('toggle')
}

function unCheck() {
  $('input:radio[name="options"]').parent().removeClass('active')
}

function doSum(mFirst, mSecond, sign = true) {
  if (mFirst.length !== mSecond.length) {
    unCheck()
    toggleModal('#noSameSize'); return
  } else if (mFirst[0].length !== mSecond[0].length) {
    unCheck()
    toggleModal('#noSameSize'); return
  }
  let mSolved = []
  for (let i = 0; i < mFirst.length; i++) {
    mSolved.push([])
    for (let j = 0; j < mFirst[i].length; j++) {
      if (sign) {
        mSolved[i].push(mFirst[i][j] + mSecond[i][j])
      } else {
        mSolved[i].push(mFirst[i][j] - mSecond[i][j])
      }
    }
  }
  emptyTable('C')
  makeTable(mSolved, 'C')
}

function doMult(mFirst, mSecond, mSolved = []) {
  if (mFirst[0].length !== mSecond.length) {
    unCheck()
    toggleModal('#noEqualIntersections'); return
  }
  let sum = 0
  mFirst.forEach(function (element, m) {
    mSolved.push([])
    for (let i = 0; i < mSecond[0].length; i++) {
      mSolved[m].push(0)
      sum = 0
      for (let j = 0; j < element.length; j++) {
        sum += element[j] * mSecond[j][i]
        if (j === element.length-1) {
          mSolved[m][i] = sum
        }
      }
    }
  })

  emptyTable('C')
  makeTable(mSolved, 'C')
}

$(document).on('click', '#twoMatrix label', doOperation)
$(document).on('select, change', '#twoMatrix select', doOperation)

$(document).on('keyup', '.matrixListener', function() {
  let parentID = $(this).parents('.card').attr('id')
  let matrix = getMatrixWithID(parentID)
  let column = $(this).parent().attr('id')
  let row = $(this).attr('id')
  let value = parseInt($(this).val()) ? parseInt($(this).val()) : 0
  matrix[column][row] = value
  doOperation()
  sizeText(matrix, '#' + parentID)
})

$(document).on('click', '#rows #sum', function(matrix) {
  let parentID = $(this).parents('.card').attr('id')
  matrix = getMatrixWithID(parentID)
  if (matrix.length === 12) return
  addRow('#' + parentID + ' #table', matrix.length)
  let newRow = []
  matrix[0].forEach(function (element, idx) {
    addColumn('#' + parentID + ' #table div#' + matrix.length, idx)
    newRow.push(0)
  })
  matrix.push(newRow)
  sizeText(matrix, '#' + parentID)
  doOperation()
})

$(document).on('click', '#rows #sub', function(matrix) {
  let parentID = $(this).parents('.card').attr('id')
  matrix = getMatrixWithID(parentID)
  if (matrix.length === 1) return
  $('#' + parentID + ' #table div#' + (matrix.length-1)).fadeOut(100, function() {
    $(this).remove()
  })
  matrix.pop()
  sizeText(matrix, '#' + parentID)
  doOperation()
})

$(document).on('click', '#columns #sum', function(matrix) {
  let parentID = $(this).parents('.card').attr('id')
  matrix = getMatrixWithID(parentID)
  if (matrix[0].length === 12) return
  $('#' + parentID + ' #table div').each(function(idx) {
    addColumn('#' + parentID + ' #table div#' + idx, matrix[0].length)
  })
  matrix.forEach(function (mtx) {
    mtx.push(0)
  })
  sizeText(matrix, '#' + parentID)
  doOperation()
})

$(document).on('click', '#columns #sub', function(matrix) {
  let parentID = $(this).parents('.card').attr('id')
  matrix = getMatrixWithID(parentID)
  if (matrix[0].length === 1) return
  $('#' + parentID + ' #table div').each(function(idx, element) {
    $(element).children().last().fadeOut(100, function() {
      $(this).remove()
    })
  })
  matrix.forEach(function (mtx) {
    mtx.pop()
  })
  sizeText(matrix, '#' + parentID)
  doOperation()
})

doOperation()
function doOperation(matrixFirst, matrixSecond) {
  matrixFirst = ($('#matrixFirst').find(':selected').text()) === 'Matrix B'
                ? matrixB : matrixA
  matrixSecond = ($('#matrixSecond').find(':selected').text()) === 'Matrix B'
                 ? matrixB : matrixA
  let operation = $('#operation').find('.active').attr('id')
  if (operation === 'sum') {
    doSum(matrixFirst, matrixSecond)
  }
  if (operation === 'sub') {
    doSum(matrixFirst, matrixSecond, false)
  }
  if (operation === 'mult') {
    doMult(matrixFirst, matrixSecond)
  }
}
</script></body></html>