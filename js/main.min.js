function addRow(path,id){let row='<div class="d-flex flex-nowrap" id="'+id+'">';$(path).append(row)}function addColumn(path,id,value=""){let column='<input type="tel" class="form-control matrixListener" id="'+id+'" value="'+value+'" placeholder="-" style="text-align:center;">';$(path).append(column)}function doMatrix(matrix,rows,columns){for(let i=0;i<rows;i++){matrix.push([]);for(let j=0;j<columns;j++)matrix[i].push(Math.floor(10*Math.random()))}}function makeTable(matrix,name){matrix.forEach(function(matrix,i){addRow("#mTable"+name+" #table",i),matrix.forEach(function(matrix,j){addColumn("#mTable"+name+" #table div#"+i,j,matrix)})})}function emptyTable(name){$("#mTable"+name+" #table").empty()}function getMatrixWithID(parentID){return parentID=parentID.toString(),parentID=parentID.replace(/mTable/g,""),"A"===parentID?matrixA:"B"===parentID?matrixB:void 0}function toggleModal(path){$(path).modal("toggle")}function doSum(mFirst,mSecond,sign=!0){if(mFirst.length!==mSecond.length)return void toggleModal("#noSameSize");if(mFirst[0].length!==mSecond[0].length)return void toggleModal("#noSameSize");let mSolved=[];for(let i=0;i<mFirst.length;i++){mSolved.push([]);for(let j=0;j<mFirst[i].length;j++)sign?mSolved[i].push(mFirst[i][j]+mSecond[i][j]):mSolved[i].push(mFirst[i][j]-mSecond[i][j])}emptyTable("C"),makeTable(mSolved,"C")}function doMult(mFirst,mSecond,mSolved=[]){if(mFirst[0].length!==mSecond.length)return void toggleModal("#noEqualIntersections");let sum=0;mFirst.forEach(function(element,m){mSolved.push([]);for(let i=0;i<mSecond[0].length;i++){mSolved[m].push(0),sum=0;for(let j=0;j<element.length;j++)sum+=element[j]*mSecond[j][i],j===element.length-1&&(mSolved[m][i]=sum)}}),emptyTable("C"),makeTable(mSolved,"C")}var matrixA=[],matrixB=[];doMatrix(matrixA,3,4),doMatrix(matrixB,4,3),makeTable(matrixA,"A"),makeTable(matrixB,"B"),$(document).on("keyup",".matrixListener",function(){let parentID=$(this).parent().parent().parent().attr("id"),matrix=getMatrixWithID(parentID),column=$(this).parent().attr("id"),row=$(this).attr("id"),value=parseInt($(this).val())?parseInt($(this).val()):0;matrix[column][row]=value}),$(document).on("click","#rows #sum",function(matrix){let parentID=$(this).parent().parent().parent().attr("id");if(matrix=getMatrixWithID(parentID),12!==matrix.length){addRow("#"+parentID+" #table",matrix.length);let newRow=[];matrix[0].forEach(function(element,idx){addColumn("#"+parentID+" #table div#"+matrix.length,idx),newRow.push(0)}),matrix.push(newRow)}}),$(document).on("click","#rows #sub",function(matrix){let parentID=$(this).parent().parent().parent().attr("id");matrix=getMatrixWithID(parentID),1!==matrix.length&&($("#"+parentID+" #table div#"+(matrix.length-1)).fadeOut(100,function(){$(this).remove()}),matrix.pop())}),$(document).on("click","#columns #sum",function(matrix){let parentID=$(this).parent().parent().parent().attr("id");matrix=getMatrixWithID(parentID),12!==matrix[0].length&&($("#"+parentID+" #table div").each(function(idx){addColumn("#"+parentID+" #table div#"+idx,matrix[0].length)}),matrix.forEach(function(mtx){mtx.push(0)}))}),$(document).on("click","#columns #sub",function(matrix){let parentID=$(this).parent().parent().parent().attr("id");matrix=getMatrixWithID(parentID),1!==matrix[0].length&&($("#"+parentID+" #table div").each(function(idx,element){$(element).children().last().fadeOut(100,function(){$(this).remove()})}),matrix.forEach(function(mtx){mtx.pop()}))}),$(document).on("click","#matrixOperator #twoMatrix label",function(matrixFirst,matrixSecond){if("Select Matrix"===$(this).parent().parent().parent().find("#matrixFirst").find(":selected").text())return void toggleModal("#missinMatrix");if("Select Matrix"===$(this).parent().parent().parent().find("#matrixSecond").find(":selected").text())return void toggleModal("#missinMatrix");matrixFirst="Matrix B"===$(this).parent().parent().parent().find("#matrixFirst").find(":selected").text()?matrixB:matrixA,matrixSecond="Matrix B"===$(this).parent().parent().parent().find("#matrixSecond").find(":selected").text()?matrixB:matrixA;let operation=$(this).children().attr("id");"sum"===operation&&doSum(matrixFirst,matrixSecond),"sub"===operation&&doSum(matrixFirst,matrixSecond,!1),"mult"===operation&&doMult(matrixFirst,matrixSecond)});